<!DOCTYPE html>
<html lang="en">
<head>
        <title>Shane Dowling : SugarCRM 7 — Fix to re-enable ElasticSearch on custom modules</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        <link href="https://shanedowling.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Shane Dowling ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body>
        
<header>
    <h1><a href="." id="site-title">Shane Dowling </a> :
        <a href="./sugarcrm-7-fix-to-re-enable-elasticsearch-on-custom-modules-f669c97ca480.html" id="page-title">SugarCRM 7 — Fix to re-enable ElasticSearch on custom modules</a></h1>
<time datetime="2014-09-18T00:00:00+00:00">Thu 18 September 2014</time></header>
<article>
    <p><img alt="" src="images/1__HOS9Snvhcd__NSa6OnO__ksQ.png"></p>
<p>I had an issue in Sugar where some custom modules refused to appear in
the Global Search settings, meaning I couldn't index them in
ElasticSearch.</p>
<p>When I checked the module oddly enough unified search would be enabled:</p>
<p>modules/<MODULE>/vardefs.php</p>
<h3>1. Re-enable the module</h3>
<p>To force it to be re-enabled update/create this file</p>
<p>custom/Extension/modules/<MODULE>/Ext/Vardefs/vardefs.php</p>
<p>and add this setting.</p>
<div class="highlight"><pre><span></span><code><span class="x">$dictionary[&#39;&lt;MODULE&gt;&#39;][&#39;unified_search&#39;] = true;</span>
</code></pre></div>

<h3>2. Re-enable a field</h3>
<p>You'll also need a field using the unified index before SugarCRM</p>
<p>custom/Extension/modules/<MODULE>/Ext/Vardefs/sugarfield_name.php</p>
<p>Enable unfied_search as a setting.</p>
<div class="highlight"><pre><span></span><code><span class="x">$dictionary[&#39;&lt;MODULE&gt;&#39;][&#39;fields&#39;][&#39;name&#39;][&#39;unified_search&#39;]=true;</span>
</code></pre></div>

<p>After a quick repair/rebuild. My module appears in the Global Search
Settings and I can poll it as normal through ElasticSearch.</p>
</article>

        <footer>
            <nav>
                <ul>
                    <li><a href="./pages/contact.html">Contact</a></li>
                    <li>:: <a href="./categories.html">Categories</a></li>
                </ul>
            </nav>
        </footer>

</body>
</html>