<!DOCTYPE html>
<html lang="en">
<head>
        <title>Shane Dowling : SugarCRM — Versioning Your Database</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        <link href="https://shanedowling.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Shane Dowling ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body>
        
<header>
    <h1><a href="." id="site-title">Shane Dowling </a> :
        <a href="./sugarcrm-versioning-your-database-cdcee943048b.html" id="page-title">SugarCRM — Versioning Your Database</a></h1>
<time datetime="2014-07-16T00:00:00+00:00">Wed 16 July 2014</time></header>
<article>
    <p>One issue that constantly re-occurs for me using SugarCRM is that
certain knowledge is only stored in it's database. So say you want to
revert to a previous version of Sugar and wish to obtain the Studio
customisations you've done at that version, say two days ago, well your
just out of luck. This is pretty annoying considering most of your day
to day changes will probably be in Studio and you have no real way to
see those changes outside of Sugar's "View History", which leaves a lot
to be desired mostly as again, it's all in the DB. You're effectively
left to sharing a database dump between developers.</p>
<p>What I've done on my development environment is created a simple
pre-commit git-hook(good explanation of those <a href="http://codeinthehole.com/writing/tips-for-using-a-git-pre-commit-hook/">here</a>)
that essentially commits the database structure and the fields_meta_data table. This essentially means someone can get themselves up and running with a basic variant of my install pretty quickly including my studio changes, which are now all tracked in version control too. So put code resembling the below in your <code>.git/hooks/pre-commit</code></p>
<div class="highlight"><pre><span></span><code>rm<span class="w"> </span>/database/sugar.sql
<span class="w"> </span>mysqldump<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-p<span class="w"> </span>—<span class="w"> </span>no-data<span class="w"> </span>&gt;<span class="w"> </span>/database/sugar.sql
<span class="w"> </span>mysqldump<span class="w"> </span>-v<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-p<span class="w"> </span>fields_meta_data<span class="w"> </span>&gt;&gt;<span class="w"> </span>/database/sugar.sql
</code></pre></div>

<p>Originally I had this creating a gzipped time-stamped version of sugar
database dumps, but considering the SQL is small it makes much more
sense to leverage the plain-text advantages git gives you, and simply
track the changes through git rather than timestamped DB dumps.</p>
<p><strong>Note:</strong> I only use this script on my local dev environment. This also
isn't version controlled either, so I don't mind that my dev database
password is stored in plaintext.</p>
</article>

        <footer>
            <nav>
                <ul>
                    <li><a href="./pages/contact.html">Contact</a></li>
                    <li>:: <a href="./categories.html">Categories</a></li>
                </ul>
            </nav>
        </footer>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z9P3V6D0SV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z9P3V6D0SV');
</script>
</body>
</html>