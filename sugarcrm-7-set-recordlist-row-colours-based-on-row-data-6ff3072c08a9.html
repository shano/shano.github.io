<!DOCTYPE html>
<html lang="en">
<head>
        <title>Shane Dowling : SugarCRM 7 — Set recordlist row colours based on row data</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        <link href="https://shanedowling.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Shane Dowling ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body>
        
<header>
    <h1><a href="." id="site-title">Shane Dowling  <strong>Shane Dowling</strong></a> :
        <a href="./sugarcrm-7-set-recordlist-row-colours-based-on-row-data-6ff3072c08a9.html" id="page-title">SugarCRM 7 — Set recordlist row colours based on row data</a></h1>
<time datetime="2014-07-12T00:00:00+00:00">Sat 12 July 2014</time></header>
<article>
    <p><img alt="" src="images/1__ftmi7V32ZXjnNFoJRH6UnQ.jpeg"></p>
<p>The tutorial shows you how to do two useful things in SugarCRM 7.
Firstly, how to call actions when rows get updated in SugarCRM's
recordlist and secondly, how to set information based on row data. The
example I have here will essentially update the table colours based on a
specific data value in each row. So say you have a drop-down with the
values Red,Green,Orange and Yellow this will update the rows to the
specified colour. The key call here is this.collection.on('data:sync:complete'), which essentially fires when the sidecar(read backbone), data sync is completed.</p>
<p>This code would go in custom/modules/<YOUR_MODULE>/clients/base/views/recordlist/recordlist.js</p>
<p>```javascript
({</p>
<p>this.collection.on('data:sync:complete', function() {
 this.render_colors();
 }, this);
 },
 render_colors : function() {
 setTimeout(
 function() {
 $("tr[name^='']").each(function () { //loop over each row
 if ($(this).find('div[data-original-title="Red"]').length &gt; 0) { //check value of TD
 $(this).find($('td')).each(function () {
 $(this).css("background-color", "#FFBABA");
 });
 } else if ($(this).find('div[data-original-title="Green"]').length &gt; 0) {
 $(this).find($('td')).each(function () {
 $(this).css("background-color", "#C3F8B5");
 });
 } else if ($(this).find('div[data-original-title="Orange"]').length &gt; 0) {
 $(this).find($('td')).each(function () {
 $(this).css("background-color", "#FFCF8F");
 });
 } else if ($(this).find('div[data-original-title="Yellow"]').length &gt; 0) {
 $(this).find($('td')).each(function () {
 $(this).css("background-color", "#FAFE8E");
 });
 }
 });
 }, 1000);
 }
 })
 ```</p>
<p>One thing you might note is the setTimeout with a delay of 1 second.
This is simply because the table won't have rendered as soon as the sync
has completed so a wait of a second was added to allow the browser to
render the table, before iterating through the rows and setting the
appropriate colours. I honestly just couldn't find any documentation or
code samples to see if an even fired when the table gets re-rendered,
but I'll update it here if I find a better solution.</p>
</article>

        <footer>
            <nav>
                <ul>
                    <li><a href="./pages/contact.html">Contact</a></li>
                    <li>:: <a href="./categories.html">Categories</a></li>
                </ul>
            </nav>
                <p id="theme-credit"><a href="http://mathieu.agopian.info/mnmlist/theme.html">Thème mnmlist</a></p>
        </footer>

</body>
</html>