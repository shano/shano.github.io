
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="./theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/solid.css">




  <link href="https://shanedowling.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Shane Dowling Atom">

  <link href="https://shanedowling.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Shane Dowling RSS">

<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-Z9P3V6D0SV', 'auto');
  ga('send', 'pageview');
</script>






 

<meta name="author" content="Shane Dowling" />
<meta name="description" content="Gmail isn&#39;t secure or private, Google have admitted this. You simply cannot expect privacy from any service that you don&#39;t have control of. Thankfully your email doesn&#39;t have to be tied a mail service like Gmail, Yahoo or Microsoft. You can simply roll your own email server with your own …" />
<meta name="keywords" content="">


  <meta property="og:site_name" content="Shane Dowling"/>
  <meta property="og:title" content="Owning Your Data — Replacing Gmail"/>
  <meta property="og:description" content="Gmail isn&#39;t secure or private, Google have admitted this. You simply cannot expect privacy from any service that you don&#39;t have control of. Thankfully your email doesn&#39;t have to be tied a mail service like Gmail, Yahoo or Microsoft. You can simply roll your own email server with your own …"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="./owning-your-data-replacing-gmail-20e9e2259fa2.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2014-03-29 00:00:00+00:00"/>
  <meta property="article:modified_time" content=""/>
  <meta property="article:author" content="./author/shane-dowling.html">
  <meta property="article:section" content="Tech"/>
  <meta property="og:image" content="/images/logo.png">

  <title>Shane Dowling &ndash; Owning Your Data — Replacing Gmail</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="./">
      <img src="/images/logo.png" alt="Shane Dowling" title="Shane Dowling">
    </a>

    <h1>
      <a href="./">Shane Dowling</a>
    </h1>

    <p>Platform Engineering Manager</p>


    <nav>
      <ul class="list">


            <li>
              <a target="_self"
                 href="./pages/contact.html#contact">
                Contact
              </a>
            </li>
            <li>
              <a target="_self"
                 href="./pages/now-page.html#now-page">
                Now Page
              </a>
            </li>
            <li>
              <a target="_self"
                 href="./pages/statuslog.html#statuslog">
                Statuslog
              </a>
            </li>

          <li>
            <a target="_self" href="https://hybridcloudshow.com/" >podcast</a>
          </li>
          <li>
            <a target="_self" href="https://pemonthly.com/" >newsletter</a>
          </li>
      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-github"
           href="http://github.com/shano"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
      <li>
        <a class="sc-mastodon"
rel="me"           href="http://social.lol/@sed"
           target="_blank">
          <i class="fa-brands fa-mastodon"></i>
        </a>
      </li>
      <li>
        <a class="sc-linkedin"
           href="https://www.linkedin.com/in/shanedow/"
           target="_blank">
          <i class="fa-brands fa-linkedin"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="owning-your-data-replacing-gmail-20e9e2259fa2">Owning Your Data — Replacing Gmail</h1>
    <p>
      Posted on Sat 29 March 2014 in <a href="./category/tech.html">Tech</a>

    </p>
  </header>


  <div>
    <p><img alt="" src="images/1__jrj__wnQecgnTwBXPZsg05w.jpeg"></p>
<p>Gmail isn't secure or private, Google have admitted this. You simply cannot expect privacy from any service that you don't have
control of. Thankfully your email doesn't have to be tied a mail service
like Gmail, Yahoo or Microsoft. You can simply roll your own email
server with your own domain name and easily create an (admittedly
minimalist) Gmail equivalent.</p>
<h3>Before you start</h3>
<p>If you think this guide is too complex, that's totally understandable.
Running your own mail server requires a reasonable amount of technical
experience. If you're interesting in getting away from a service like
Gmail and want a good alternative check-out <a href="https://mykolab.com/.">https://mykolab.com/.</a> It
costs around 10 bucks a month for 2GB of storage, which isn't too bad.
If you think this isn't enough space, you could either pay for more or
have a mail client like thunderbird offline all non-essential email to
your desktop.</p>
<h3>What you're not getting</h3>
<p>This is very minimal email setup. You won't be getting a web-accessible
email client. If you want your email accessible everywhere, this simply
isn't a guide for you. If you do want web-accesible email setup you
could use something like `iRedmail `__\ to do
all of your configuration for you. I find that because iRedmail
configures everything automatically, I'm less in control of how my
server works. Plus the extra requirements iRedmail needs reduce the
security of my server, which I'm not too happy about. This guide is to
get the bare minimum for email to work.
Also, to decrease the amount of time my emails sit on my server, I store
all of emails on my local machine and back that machine up locally. This
is simply to minimise data leakage should my server become compromised.
So you will need to point a mail client(thunderbird, k9 for Android etc)
to download your email locally for search indexing. Sadly, there are a
few usability prices to pay to stay out of another companies pocket.</p>
<h3>Requirements</h3>
<ul>
<li>Ensure you have a server setup with salt. See <a href="https://shanedowling.com/owning-your-data-initial-server-setup-afa33394b94">here</a>.</li>
<li>A domain name you wish to send email from. So instead of you@gmail.com it's you@mynewdomain.com. I use <a href="https://www.namecheap.com">namecheap</a>. They accept bitcoin and will allow you to buy <a href="https://www.namecheap.com/security/whoisguard.aspx">whoisguard</a> for your domain name. So fake all the details on here and make sure you buy whoisguard just to keep things quiet.</li>
<li>Once you have bought your domain name, you will need to point your domain mail records to your new server. Namecheap has a guide here. Generally, I create an A record on my domain mx.mynewdomain.com to the ip of my server. I then setup multiple mx records that point to mx.mynewdomain.com. I also use backup DNS suppliers for my low priority mx records (say priority 40/50), take a look at https://freedns.afraid.org/ to get yourself some free domain names.</li>
<li>Install git</li>
</ul>
<div class="highlight"><pre><span></span><code>apt-get<span class="w"> </span>install<span class="w"> </span>git
</code></pre></div>

<ul>
<li>Setup a user on the server who you wish to send/recieve email as. So adduser jim and enter the password you wish to authenticate with on your mail client.</li>
</ul>
<h3>Setting up the server</h3>
<p>The first thing you're going to need to do is, using salt, grab my <a href="https://github.com/shano/salty-mailer">salty-mailer setup</a>. This leverages salt stack and will install everything you need to get your
mail server up and running. You don't need to worry too much about what
git does, it simply downloads the files required from github. Copy and
paste this line into the terminal and it should get things started.</p>
<p>sudo mkdir /srv/salt/mail &amp;&amp; sudo git clone
 <a href="https://github.com/shano/salty-mailer">https://github.com/shano/salty-mailer</a> /srv/salt/mail</p>
<p>Now you'll need to configure a few files, with your own settings.</p>
<ul>
<li>In /srv/salt/mail/init.sls change all entries from to the username you wish to send email as. So for example change it from to jim.</li>
<li>
<p>In /srv/salt/mail/postfix/main.cf you need to change &lt;<code>domain.com</code>&gt; to <code>mynewdomain.com</code>.</p>
</li>
<li>
<p>Under /srv/salt/top.sls ensure you have lines that look like this:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">base</span><span class="p">:</span>
<span class="w">    </span><span class="s">&#39;*&#39;</span><span class="p p-Indicator">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">— mail</span>
</code></pre></div>

<p>Done? Great you've finished configuration and you're ready to install
everything. This command tells salt to read these configuration files
and install enough to get basic mail server up and running.</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>salt-call<span class="w"> </span>-l<span class="w"> </span>debug<span class="w"> </span>state.highstate
</code></pre></div>

<p>This should provide a ton of output, but as long as there's no errors,
you're good to go.</p>
<h3>Testing your mail-server</h3>
<p>You should now be able to configure your email-client to talk to your
email server. So fire up your preferred mail client and use these
settings to connect.
Inbound:</p>
<p>Server Type:IMAP
 Username:jim
 Password:</p>
<p>Outbound:</p>
<p>Server Type:SMTP
 Password:</p>
<p>Now try connect your email client to your server and see what happens.
If you have trouble connecting try run sudo tail -f /var/log/mail.log
and reconnect. See if anything appears in the output. If there is
something wrong, checkout google(duh) or tryout The Comms
Room on ServerFault and see if someone can point you in the right direction. Or of course add something in the comments here.</p>
<h3>Make your emails more reliable</h3>
<p>Now that you have your mail server up and running, you're going to need
to ensure the major email suppliers are willing to accept your email.
People suggest adding SPFs and DKIMs to your email records but
personally I haven't found either much use. The best thing for you to do is to add yourself to a legitimate whitelist. Fill in <a href="https://www.dnswl.org/selfservice/">this form</a>, the guys there will come back if the find any issues with your server that would prevent them adding you to their whitelist, once accepted Presto! You look like a legimate email user on the interwebs!</p>
<h3>What's next?</h3>
<p>Now that you've done all that work, here's the kicker. Email isn't
secure. It was never meant to be the center of our digital lives, so
back when it was invented security really wasn't a big concern. But here
we are. With everything in plain-text all over the place you'd be wise
to reduce your email as much as possible. If you wish to improve the
security of any email communications you do make, take a look at using
GPG. I use <a href="https://addons.mozilla.org/en-US/thunderbird/addon/enigmail/">Enigmail with Thunderbird</a>.</p>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>






</article>

<footer>
<p>&copy;  </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Shane Dowling ",
  "url" : ".",
  "image": "/images/logo.png",
  "description": ""
}
</script>
</body>
</html>