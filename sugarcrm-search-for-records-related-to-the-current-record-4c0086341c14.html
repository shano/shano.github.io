<!DOCTYPE html>
<html lang="en">
<head>
        <title>Shane Dowling : SugarCRM — Search for records related to the current record</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        <link href="https://shanedowling.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Shane Dowling ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body>
        
<header>
    <h1><a href="." id="site-title">Shane Dowling  <strong>Shane Dowling</strong></a> :
        <a href="./sugarcrm-search-for-records-related-to-the-current-record-4c0086341c14.html" id="page-title">SugarCRM — Search for records related to the current record</a></h1>
<time datetime="2014-04-20T00:00:00+00:00">Sun 20 April 2014</time></header>
<article>
    <p>Say you have two modules in Sugar: Animals and Ringmasters and they aren't directly related via a standard relationship but they are related through some convoluted means. Now, imagine if you want to override the SugarCRM search to allow you to search for all Animals indirectly related to a Ringmaster, I've written about how to do something <a href="http://shanedowling.com/sugarcrm-searches-data-indirectly-related-modules/">similar recently</a>. Conversely, you want to search for all Animals related to a Ringmaster you're currently viewing. It's not a link that exists in Sugar so you can directly see a Dashlet and you don't want to build anything from scratch so that's going to take effort.</p>
<p>What you could do, is create a link on the action drop-down while viewing the Ringmaster that linked you to a search that would call animals supplying the Ringmaster's id as the argument.</p>
<p>This is based on the previous tutorial I've shared.</p>
<ul>
<li>Firstly add a new logic hook in custom/modules/RingMasterModule/logic_hooks.php</li>
</ul>
<p><code>php
$hook_array['after_ui_frame'][] = Array(2, 'Custom Ring Master Buttons', 'custom/modules/RingMasterModule/CustomButtons.php
 ','RingMasterButtons', 'add');</code></p>
<ul>
<li>Then add the custom buttons class in custom/modules/RingMasterModule/CustomButtons.php</li>
</ul>
<p>```php
class RingMasterButtons {
 function add($bean)
 {
 echo $bean;
 $ringMasterID = $_GET['record'];
 if(!$ringMasterID) return;
 // Based on what action we're in, add some buttons!
 switch ($GLOBALS['app']-&gt;controller-&gt;action)
 {
 case "DetailView": // Add buttons to Detail View</p>
<p>$button_code = &lt;&lt;</p>
<p>EOQ;
 echo $button_code;
 break;
 }
 }
 }
 ```</p>
<p>Quick Repair and Rebuild for good measure. This should add a hidden form
that will be called when the user clicks the Ring Master Animals.</p>
</article>

        <footer>
            <nav>
                <ul>
                    <li><a href="./pages/contact.html">Contact</a></li>
                    <li>:: <a href="./categories.html">Categories</a></li>
                </ul>
            </nav>
                <p id="theme-credit"><a href="http://mathieu.agopian.info/mnmlist/theme.html">Thème mnmlist</a></p>
        </footer>

</body>
</html>