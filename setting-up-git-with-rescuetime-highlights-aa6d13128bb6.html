<!DOCTYPE html>
<html lang="en">
<head>
        <title>Shane Dowling : Setting up git with Rescuetime highlights</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        <link href="https://shanedowling.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Shane Dowling ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body>
        
<header>
    <h1><a href="." id="site-title">Shane Dowling </a> :
        <a href="./setting-up-git-with-rescuetime-highlights-aa6d13128bb6.html" id="page-title">Setting up git with Rescuetime highlights</a></h1>
<time datetime="2015-02-15T00:00:00+00:00">Sun 15 February 2015</time></header>
<article>
    <p><img alt="" src="images/1__jppvR1Pu3XEUcOHJp__3t3g.jpeg"></p>
<p>Recently I've written on another site how I use Rescuetime to provide metrics on my overall productivity that I can review each week. One useful feature I noticed was Rescuetime highlights, which gives you a good overview of your accompishments throughout the day. The first thing I wanted to add to this (obviously) was git commits.</p>
<p>Luckily it turns out someone had already thought of this and implemented
it. The script itself is here, I'm just going to reproduce it below.</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/sh</span>
<span class="c1">#</span>
<span class="c1"># An example hook script to log commit messages</span>
<span class="c1"># as a &#39;daily highlight&#39; in RescueTime Premium</span>
<span class="c1">#</span>
<span class="c1"># See README.md for more information</span>
<span class="c1">#</span>
<span class="c1"># To enable this hook:</span>
<span class="c1">#</span>
<span class="c1"># 1. Place this file in .git/hooks and rename to &quot;post-commit&quot;.</span>
<span class="c1">#</span>
<span class="c1"># 2. Update the value of API_KEY below with a valid RescueTime API key.</span>
<span class="c1">#    [ you can generate a key at [https://www.rescuetime.com/anapi/manage](https://www.rescuetime.com/anapi/manage) ]</span>

<span class="nv">API_KEY</span><span class="o">=</span>PUT_YOUR_API_KEY_HERE

<span class="c1"># REQUIRED FIELDS - Today&#39;s date and commit message</span>

<span class="nv">MESSAGE</span><span class="o">=</span><span class="k">$(</span>git<span class="w"> </span>log<span class="w"> </span>-1<span class="w"> </span>HEAD<span class="w"> </span>--pretty<span class="o">=</span>format:%s<span class="k">)</span>
<span class="nv">DATE_TODAY</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+<span class="s2">&quot;%Y-%m-%d&quot;</span><span class="k">)</span>

<span class="c1"># You can edit the LABEL value if you would rather</span>
<span class="c1"># describe these commits differently.</span>

<span class="nv">LABEL</span><span class="o">=</span><span class="s1">&#39;Code Commit&#39;</span>

<span class="c1"># See more filtering examples in README.md</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="si">${#</span><span class="nv">MESSAGE</span><span class="si">}</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span>curl<span class="w"> </span>--data<span class="w"> </span><span class="s2">&quot;key=</span><span class="nv">$API_KEY</span><span class="s2">&amp;highlight_date=</span><span class="nv">$DATE_TODAY</span><span class="s2">&amp;description=</span><span class="nv">$MESSAGE</span><span class="s2">&amp;source=</span><span class="nv">$LABEL</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">[</span>https://www.rescuetime.com/anapi/highlights_post<span class="o">](</span>https://www.rescuetime.com/anapi/highlights_post<span class="o">)</span>
<span class="k">fi</span>
</code></pre></div>

<p>Now, the annoying part for me is that this doesn't work globally across
all of my git repos, so to fix this you can leverage git's templates directory.
To create/initialise a git template folder simply run these commands.</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>config<span class="w"> </span>—<span class="w"> </span>global<span class="w"> </span>init.templatedir<span class="w"> </span><span class="s1">&#39;~/.git_template&#39;</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>~/.git-templates/hooks
</code></pre></div>

<p>Then put the above shell code into ~/.git-templates/hooks/post-commit</p>
<p>What this means is that from now on, any new git repos you initialise
will contain this post-hook script. However, if you want to attach this
to existing repos, just run a git init wherever the .git folder is.</p>
</article>

        <footer>
            <nav>
                <ul>
                    <li><a href="./pages/contact.html">Contact</a></li>
                    <li>:: <a href="./categories.html">Categories</a></li>
                </ul>
            </nav>
                <p id="theme-credit"><a href="http://mathieu.agopian.info/mnmlist/theme.html">Thème mnmlist</a></p>
        </footer>

</body>
</html>