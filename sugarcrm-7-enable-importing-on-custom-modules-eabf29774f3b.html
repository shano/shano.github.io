<!DOCTYPE html>
<html lang="en">
<head>
        <title>Shane Dowling : SugarCRM 7 — Enable Importing on Custom Modules</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        <link href="https://shanedowling.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Shane Dowling ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body>
        
<header>
    <h1><a href="." id="site-title">Shane Dowling  <strong>Shane Dowling</strong></a> :
        <a href="./sugarcrm-7-enable-importing-on-custom-modules-eabf29774f3b.html" id="page-title">SugarCRM 7 — Enable Importing on Custom Modules</a></h1>
<time datetime="2014-09-11T00:00:00+00:00">Thu 11 September 2014</time></header>
<article>
    <p><img alt="" src="images/1__rMyjz1HzRpsHOYM40IoG7A.jpeg"></p>
<p>I've been wracking my brain trying to get <a href="http://support.sugarcrm.com/04_Find_Answers/03_Developers/100Customization/Enabling_Importing_for_Custom_Modules/">this guide</a> to work with SugarCRM 7. Add to the fact that it "looks" like this is also how it's done in SugarCRM 7, if you peruse the code under Accounts or Contacts. However it isn't. This is how I've added importing support to custom modules.</p>
<h3>Set Module as Importable</h3>
<p>Under modules/<ModuleName>/<ModuleName>_sugar.php set</p>
<div class="highlight"><pre><span></span><code><span class="x">public $importable = true;</span>
</code></pre></div>

<h3>Add Menu Item</h3>
<p>Under modules/<MODULES>/clients/base/menus/header/header.php you
should have something like</p>
<div class="highlight"><pre><span></span><code><span class="x">$moduleName = &#39;&#39;;</span>
<span class="x"> $viewdefs[$moduleName][&#39;base&#39;][&#39;menu&#39;][&#39;header&#39;] = array(</span>
<span class="x"> array(</span>
<span class="x"> &#39;route&#39; =&gt; &quot;#$moduleName/create&quot;,</span>
<span class="x"> &#39;label&#39; =&gt; &#39;LNK_NEW_RECORD&#39;,</span>
<span class="x"> &#39;acl_action&#39; =&gt; &#39;create&#39;,</span>
<span class="x"> &#39;acl_module&#39; =&gt; $moduleName,</span>
<span class="x"> &#39;icon&#39; =&gt; &#39;icon-plus&#39;,</span>
<span class="x"> ),</span>
<span class="x"> array(</span>
<span class="x"> &#39;route&#39; =&gt; &quot;#$moduleName&quot;,</span>
<span class="x"> &#39;label&#39; =&gt; &#39;LNK_LIST&#39;,</span>
<span class="x"> &#39;acl_action&#39; =&gt; &#39;list&#39;,</span>
<span class="x"> &#39;acl_module&#39; =&gt; $moduleName,</span>
<span class="x"> &#39;icon&#39; =&gt; &#39;icon-reorder&#39;,</span>
<span class="x"> ),</span>
<span class="x"> );</span>
</code></pre></div>

<p>If not create the file with that array. Next add the import action to
the array.</p>
<div class="highlight"><pre><span></span><code><span class="x">array(</span>
<span class="x"> &#39;route&#39; =&gt; &#39;#bwc/index.php?&#39; . http_build_query(</span>
<span class="x"> array(</span>
<span class="x"> &#39;module&#39; =&gt; &#39;Import&#39;,</span>
<span class="x"> &#39;action&#39; =&gt; &#39;Step1&#39;,</span>
<span class="x"> &#39;import_module&#39; =&gt; $moduleName,</span>
<span class="x"> )</span>
<span class="x"> ),</span>
<span class="x"> &#39;label&#39; =&gt;&#39;LBL_IMPORT&#39;,</span>
<span class="x"> &#39;acl_action&#39;=&gt;&#39;import&#39;,</span>
<span class="x"> &#39;acl_module&#39;=&gt;$moduleName,</span>
<span class="x"> &#39;icon&#39; =&gt; &#39;icon-upload&#39;,</span>
<span class="x"> ),</span>
</code></pre></div>

<h3>Add language setting</h3>
<p>Under /modules/<MODULES>/language/en_us.lang.php add into the
$mod_strings array(if it's not already there):</p>
<div class="highlight"><pre><span></span><code><span class="x">&#39;LBL_IMPORT&#39; =&gt; &#39;Import &#39;,</span>
</code></pre></div>

<h3>Finally</h3>
<p>The inevitable quick repair/rebuild.</p>
</article>

        <footer>
            <nav>
                <ul>
                    <li><a href="./pages/contact.html">Contact</a></li>
                    <li>:: <a href="./categories.html">Categories</a></li>
                </ul>
            </nav>
                <p id="theme-credit"><a href="http://mathieu.agopian.info/mnmlist/theme.html">Thème mnmlist</a></p>
        </footer>

</body>
</html>