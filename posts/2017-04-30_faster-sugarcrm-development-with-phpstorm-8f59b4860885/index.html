<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Faster SugarCRM Development with PHPStorm | Shane Dowling</title><meta name=keywords content><meta name=description content="
Javascript development with SugarCRM can be a bit of a pain, however combining PHPStorm&rsquo;s filewatcher tool with a cut down repair script can speed things up to a more tolerable level.
What this setup does is watch for any javascript changes in our custom/ folder(because you&rsquo;re not making core hacks are you?) and execute a light-weight repair script when any of those files change. So you&rsquo;ll hit save in PHPStorm, wait a few seconds and your dev javascript should be refreshed and ready to test."><meta name=author content="Shane Dowling"><link rel=canonical href=https://shanedowling.com/posts/2017-04-30_faster-sugarcrm-development-with-phpstorm-8f59b4860885/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://shanedowling.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://shanedowling.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://shanedowling.com/favicon-32x32.png><link rel=apple-touch-icon href=https://shanedowling.com/apple-touch-icon.png><link rel=mask-icon href=https://shanedowling.com/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://shanedowling.com/posts/2017-04-30_faster-sugarcrm-development-with-phpstorm-8f59b4860885/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://shanedowling.com/posts/2017-04-30_faster-sugarcrm-development-with-phpstorm-8f59b4860885/"><meta property="og:site_name" content="Shane Dowling"><meta property="og:title" content="Faster SugarCRM Development with PHPStorm"><meta property="og:description" content="
Javascript development with SugarCRM can be a bit of a pain, however combining PHPStorm’s filewatcher tool with a cut down repair script can speed things up to a more tolerable level.
What this setup does is watch for any javascript changes in our custom/ folder(because you’re not making core hacks are you?) and execute a light-weight repair script when any of those files change. So you’ll hit save in PHPStorm, wait a few seconds and your dev javascript should be refreshed and ready to test."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-04-30T00:00:00+00:00"><meta property="article:modified_time" content="2017-04-30T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Faster SugarCRM Development with PHPStorm"><meta name=twitter:description content="
Javascript development with SugarCRM can be a bit of a pain, however combining PHPStorm&rsquo;s filewatcher tool with a cut down repair script can speed things up to a more tolerable level.
What this setup does is watch for any javascript changes in our custom/ folder(because you&rsquo;re not making core hacks are you?) and execute a light-weight repair script when any of those files change. So you&rsquo;ll hit save in PHPStorm, wait a few seconds and your dev javascript should be refreshed and ready to test."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://shanedowling.com/posts/"},{"@type":"ListItem","position":2,"name":"Faster SugarCRM Development with PHPStorm","item":"https://shanedowling.com/posts/2017-04-30_faster-sugarcrm-development-with-phpstorm-8f59b4860885/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Faster SugarCRM Development with PHPStorm","name":"Faster SugarCRM Development with PHPStorm","description":"\nJavascript development with SugarCRM can be a bit of a pain, however combining PHPStorm\u0026rsquo;s filewatcher tool with a cut down repair script can speed things up to a more tolerable level.\nWhat this setup does is watch for any javascript changes in our custom/ folder(because you\u0026rsquo;re not making core hacks are you?) and execute a light-weight repair script when any of those files change. So you\u0026rsquo;ll hit save in PHPStorm, wait a few seconds and your dev javascript should be refreshed and ready to test.\n","keywords":[],"articleBody":"\nJavascript development with SugarCRM can be a bit of a pain, however combining PHPStorm’s filewatcher tool with a cut down repair script can speed things up to a more tolerable level.\nWhat this setup does is watch for any javascript changes in our custom/ folder(because you’re not making core hacks are you?) and execute a light-weight repair script when any of those files change. So you’ll hit save in PHPStorm, wait a few seconds and your dev javascript should be refreshed and ready to test.\nThe Repair Script -—-—-—-— -\nFirst thing to do is get our hands on a fast repair script. Thankfully FrancescaS on the SugarCRM forums came up with a tidy javascript focused version of a repair script(originally by Jeff Bikart. The whole thread is `here `__ but I’ll reproduce the code below for the lazy.\n/* * Copyright 2013 * Jeff Bickart * @bickart * jeff @ neposystems.com * modified by FrancescaS @ wolfram.com to repair/rebuild * only what absolutely necessary to work on js scripts */ if(!defined('sugarEntry'))define('sugarEntry', true); require_once('include/entryPoint.php'); require_once('modules/Administration/QuickRepairAndRebuild.php'); //Bug 27991 . Redirect to index.php if the request is not come from CLI. $sapi_type = php_sapi_name(); if (substr($sapi_type, 0, 3) != 'cgi') { global $sugar_config; if(!empty($sugar_config['site_url'])){ }else{ sugar_die(\"Didn't find site url in your sugarcrm config file\"); } } //End of #27991 if(empty($current_language)) { $current_language = $sugar_config['default_language']; } $app_list_strings = return_app_list_strings_language($current_language); $app_strings = return_application_language($current_language); global $current_user; $current_user = new User(); $current_user-\u003egetSystemUser(); $GLOBALS['log']-\u003edebug('-—-—-—-—-—-—-—-—-—-—-→ at repair.php ←-—-—-—-—-—-—-—-—-—-—-'); $repair = new RepairAndClear(); // replace the repairAndClearAll with a limited set or clear actions //$repair-\u003erepairAndClearAll(array('clearAll'),array(translate('LBL_ALL_MODULES')), true,false,''); $repair-\u003emodule_list= array(translate('LBL_ALL_MODULES')); $repair-\u003eshow_output = false; $repair-\u003eexecute= true; $repair-\u003eclearLanguageCache(); MetaDataManager::enableCacheRefreshQueue(); $repair-\u003eclearTpls(); $repair-\u003eclearJsFiles(); $repair-\u003eclearJsLangFiles(); $repair-\u003eclearLanguageCache(); $repair-\u003eclearDashlets(); $repair-\u003eclearSmarty(); $repair-\u003eclearThemeCache(); $repair-\u003eclearXMLfiles(); $repair-\u003eclearExternalAPICache(); $repair-\u003eclearAdditionalCaches(); $repair-\u003eclearPDFFontCache(); $repair-\u003erepairMetadataAPICache(); $exit_on_cleanup = true; sugar_cleanup(false); // some jobs have annoying habit of calling sugar_cleanup(), and it can be called only once // but job results can be written to DB after job is finished, so we have to disconnect here again // just in case we couldn't call cleanup if(class_exists('DBManagerFactory')) { $db = DBManagerFactory::getInstance(); $db-\u003edisconnect(); } if($exit_on_cleanup) exit; Take this file and move it to your ~/Bin folder or wherever you tend to put these one off little scripts.\nThe Watcher\nThe next thing to do is configure PHPStorm to start watching for Javascript file changes.\nGo into Settings-\u003eTools-\u003eFile Watchers and hit the green plus to add a new watcher.\nSimply alter your pattern to whatever your SugarCRM project structure looks like.\nYou should see a count of the number of files the scope has detected in the project and it should be more than 0, so use that as a guide to ensure the scope is correctly identifying all your interesting javascript files.\nOnce the scope is sorted, back in the watcher configuration, for the ‘Argument’ setting you will need to put in the path to the repair script from above then finally, for the ‘Working Directory’ put the root of the SugarCRM source.\nAfter all of that is configured make some changes to a javascript file, hit save and hopefully you should see the ‘Watch for JS Changes’ task running for a few seconds.\n","wordCount":"513","inLanguage":"en","datePublished":"2017-04-30T00:00:00Z","dateModified":"2017-04-30T00:00:00Z","author":{"@type":"Person","name":"Shane Dowling"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://shanedowling.com/posts/2017-04-30_faster-sugarcrm-development-with-phpstorm-8f59b4860885/"},"publisher":{"@type":"Organization","name":"Shane Dowling","logo":{"@type":"ImageObject","url":"https://shanedowling.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://shanedowling.com/ accesskey=h title="Shane Dowling (Alt + H)">Shane Dowling</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://shanedowling.com/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://shanedowling.com/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Faster SugarCRM Development with PHPStorm</h1><div class=post-meta><span title='2017-04-30 00:00:00 +0000 UTC'>April 30, 2017</span>&nbsp;·&nbsp;Shane Dowling</div></header><div class=post-content><p><img loading=lazy src=/1__QzgJ__r__gWS5Nddl0PmJlSw.png></p><p>Javascript development with SugarCRM can be a bit of a pain, however combining PHPStorm&rsquo;s filewatcher tool with a cut down repair script can speed things up to a more tolerable level.</p><p>What this setup does is watch for any javascript changes in our custom/ folder(because you&rsquo;re not making core hacks are you?) and execute a light-weight repair script when any of those files change. So you&rsquo;ll hit save in PHPStorm, wait a few seconds and your dev javascript should be refreshed and ready to test.</p><p>The Repair Script
-—-—-—-— -</p><p>First thing to do is get our hands on a fast repair script. Thankfully FrancescaS on the SugarCRM forums came up with a tidy javascript focused version of a repair script(originally by Jeff Bikart. The whole thread is `here `__ but I&rsquo;ll reproduce the code below for the lazy.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>* Copyright 2013
</span></span></span><span style=display:flex><span><span style=color:#75715e>* Jeff Bickart
</span></span></span><span style=display:flex><span><span style=color:#75715e>* @bickart
</span></span></span><span style=display:flex><span><span style=color:#75715e>* jeff @ neposystems.com
</span></span></span><span style=display:flex><span><span style=color:#75715e>* modified by FrancescaS @ wolfram.com to repair/rebuild
</span></span></span><span style=display:flex><span><span style=color:#75715e>* only what absolutely necessary to work on js scripts
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span><span style=color:#a6e22e>defined</span>(<span style=color:#e6db74>&#39;sugarEntry&#39;</span>))<span style=color:#a6e22e>define</span>(<span style=color:#e6db74>&#39;sugarEntry&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>require_once</span>(<span style=color:#e6db74>&#39;include/entryPoint.php&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>require_once</span>(<span style=color:#e6db74>&#39;modules/Administration/QuickRepairAndRebuild.php&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>//Bug 27991 . Redirect to index.php if the request is not come from CLI.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$sapi_type <span style=color:#f92672>=</span> <span style=color:#a6e22e>php_sapi_name</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>substr</span>($sapi_type, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>) <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#39;cgi&#39;</span>) {
</span></span><span style=display:flex><span><span style=color:#66d9ef>global</span> $sugar_config;
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span><span style=color:#66d9ef>empty</span>($sugar_config[<span style=color:#e6db74>&#39;site_url&#39;</span>])){
</span></span><span style=display:flex><span>}<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span><span style=color:#a6e22e>sugar_die</span>(<span style=color:#e6db74>&#34;Didn&#39;t find site url in your sugarcrm config file&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>//End of #27991
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>empty</span>($current_language)) {
</span></span><span style=display:flex><span>$current_language <span style=color:#f92672>=</span> $sugar_config[<span style=color:#e6db74>&#39;default_language&#39;</span>];
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>$app_list_strings <span style=color:#f92672>=</span> <span style=color:#a6e22e>return_app_list_strings_language</span>($current_language);
</span></span><span style=display:flex><span>$app_strings <span style=color:#f92672>=</span> <span style=color:#a6e22e>return_application_language</span>($current_language);
</span></span><span style=display:flex><span><span style=color:#66d9ef>global</span> $current_user;
</span></span><span style=display:flex><span>$current_user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>User</span>();
</span></span><span style=display:flex><span>$current_user<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getSystemUser</span>();
</span></span><span style=display:flex><span>$GLOBALS[<span style=color:#e6db74>&#39;log&#39;</span>]<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>debug</span>(<span style=color:#e6db74>&#39;-—-—-—-—-—-—-—-—-—-—-→ at repair.php ←-—-—-—-—-—-—-—-—-—-—-&#39;</span>);
</span></span><span style=display:flex><span>$repair <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>RepairAndClear</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// replace the repairAndClearAll with a limited set or clear actions
</span></span></span><span style=display:flex><span><span style=color:#75715e>//$repair-&gt;repairAndClearAll(array(&#39;clearAll&#39;),array(translate(&#39;LBL_ALL_MODULES&#39;)), true,false,&#39;&#39;);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>module_list</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#a6e22e>translate</span>(<span style=color:#e6db74>&#39;LBL_ALL_MODULES&#39;</span>));
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>show_output</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>execute</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearLanguageCache</span>();
</span></span><span style=display:flex><span><span style=color:#a6e22e>MetaDataManager</span><span style=color:#f92672>::</span><span style=color:#a6e22e>enableCacheRefreshQueue</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearTpls</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearJsFiles</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearJsLangFiles</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearLanguageCache</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearDashlets</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearSmarty</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearThemeCache</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearXMLfiles</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearExternalAPICache</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearAdditionalCaches</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>clearPDFFontCache</span>();
</span></span><span style=display:flex><span>$repair<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>repairMetadataAPICache</span>();
</span></span><span style=display:flex><span>$exit_on_cleanup <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>sugar_cleanup</span>(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// some jobs have annoying habit of calling sugar_cleanup(), and it can be called only once
</span></span></span><span style=display:flex><span><span style=color:#75715e>// but job results can be written to DB after job is finished, so we have to disconnect here again
</span></span></span><span style=display:flex><span><span style=color:#75715e>// just in case we couldn&#39;t call cleanup
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>class_exists</span>(<span style=color:#e6db74>&#39;DBManagerFactory&#39;</span>)) {
</span></span><span style=display:flex><span>$db <span style=color:#f92672>=</span> <span style=color:#a6e22e>DBManagerFactory</span><span style=color:#f92672>::</span><span style=color:#a6e22e>getInstance</span>();
</span></span><span style=display:flex><span>$db<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>disconnect</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span>($exit_on_cleanup) <span style=color:#66d9ef>exit</span>;
</span></span></code></pre></div><p>Take this file and move it to your ~/Bin folder or wherever you tend to put these one off little scripts.</p><p>The Watcher</p><p>The next thing to do is configure PHPStorm to start watching for Javascript file changes.</p><p>Go into Settings->Tools->File Watchers and hit the green plus to add a new watcher.</p><p><img loading=lazy src=/1____XfSAae6p__j0R8XD__MGAHg.png>
<img loading=lazy src=/1__jOrBq5xCqCJ7ONApQjVfww.png></p><p>Simply alter your pattern to whatever your SugarCRM project structure looks like.</p><p>You should see a count of the number of files the scope has detected in the project and it should be more than 0, so use that as a guide to ensure the scope is correctly identifying all your interesting javascript files.</p><p>Once the scope is sorted, back in the watcher configuration, for the &lsquo;Argument&rsquo; setting you will need to put in the path to the repair script from above then finally, for the &lsquo;Working Directory&rsquo; put the root of the SugarCRM source.</p><p>After all of that is configured make some changes to a javascript file, hit save and hopefully you should see the &lsquo;Watch for JS Changes&rsquo; task running for a few seconds.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://shanedowling.com/>Shane Dowling</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>