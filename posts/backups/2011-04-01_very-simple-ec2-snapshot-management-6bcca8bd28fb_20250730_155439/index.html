<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Shane Dowling</title><meta name=keywords content><meta name=description content="title: Very Simple EC2 Snapshot Management
slug: very-simple-ec2-snapshot-management-6bcca8bd28fb
date: 2011-04-01T00:00:00.000Z
categories: [&ldquo;Tech&rdquo;]
I&rsquo;ve been pulling my hair out trying to get a handy ec2 snapshot
backup/management working. My google results have ranged from broken
libraries to using bash scripts to do one aspect and php scripts to do
another, all of the solutions seem to have serious issues with regions.
Anyway I&rsquo;ve coded up a very very stupidly simple bash script that&rsquo;s
based on the ec2-api-tools. Ubuntu based info here. Essentially sudo apt-get install ec2-api-tools should get the required tools."><meta name=author content="Shane Dowling"><link rel=canonical href=https://shanedowling.com/posts/backups/2011-04-01_very-simple-ec2-snapshot-management-6bcca8bd28fb_20250730_155439/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://shanedowling.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://shanedowling.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://shanedowling.com/favicon-32x32.png><link rel=apple-touch-icon href=https://shanedowling.com/apple-touch-icon.png><link rel=mask-icon href=https://shanedowling.com/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://shanedowling.com/posts/backups/2011-04-01_very-simple-ec2-snapshot-management-6bcca8bd28fb_20250730_155439/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://shanedowling.com/posts/backups/2011-04-01_very-simple-ec2-snapshot-management-6bcca8bd28fb_20250730_155439/"><meta property="og:site_name" content="Shane Dowling"><meta property="og:title" content="Shane Dowling"><meta property="og:description" content="title: Very Simple EC2 Snapshot Management slug: very-simple-ec2-snapshot-management-6bcca8bd28fb date: 2011-04-01T00:00:00.000Z categories: [“Tech”]
I’ve been pulling my hair out trying to get a handy ec2 snapshot backup/management working. My google results have ranged from broken libraries to using bash scripts to do one aspect and php scripts to do another, all of the solutions seem to have serious issues with regions.
Anyway I’ve coded up a very very stupidly simple bash script that’s based on the ec2-api-tools. Ubuntu based info here. Essentially sudo apt-get install ec2-api-tools should get the required tools."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="title: Very Simple EC2 Snapshot Management
slug: very-simple-ec2-snapshot-management-6bcca8bd28fb
date: 2011-04-01T00:00:00.000Z
categories: [&ldquo;Tech&rdquo;]
I&rsquo;ve been pulling my hair out trying to get a handy ec2 snapshot
backup/management working. My google results have ranged from broken
libraries to using bash scripts to do one aspect and php scripts to do
another, all of the solutions seem to have serious issues with regions.
Anyway I&rsquo;ve coded up a very very stupidly simple bash script that&rsquo;s
based on the ec2-api-tools. Ubuntu based info here. Essentially sudo apt-get install ec2-api-tools should get the required tools."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://shanedowling.com/posts/"},{"@type":"ListItem","position":2,"name":"","item":"https://shanedowling.com/posts/backups/2011-04-01_very-simple-ec2-snapshot-management-6bcca8bd28fb_20250730_155439/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"","name":"","description":"title: Very Simple EC2 Snapshot Management slug: very-simple-ec2-snapshot-management-6bcca8bd28fb date: 2011-04-01T00:00:00.000Z categories: [\u0026ldquo;Tech\u0026rdquo;]\nI\u0026rsquo;ve been pulling my hair out trying to get a handy ec2 snapshot backup/management working. My google results have ranged from broken libraries to using bash scripts to do one aspect and php scripts to do another, all of the solutions seem to have serious issues with regions.\nAnyway I\u0026rsquo;ve coded up a very very stupidly simple bash script that\u0026rsquo;s based on the ec2-api-tools. Ubuntu based info here. Essentially sudo apt-get install ec2-api-tools should get the required tools.\n","keywords":[],"articleBody":"title: Very Simple EC2 Snapshot Management slug: very-simple-ec2-snapshot-management-6bcca8bd28fb date: 2011-04-01T00:00:00.000Z categories: [“Tech”]\nI’ve been pulling my hair out trying to get a handy ec2 snapshot backup/management working. My google results have ranged from broken libraries to using bash scripts to do one aspect and php scripts to do another, all of the solutions seem to have serious issues with regions.\nAnyway I’ve coded up a very very stupidly simple bash script that’s based on the ec2-api-tools. Ubuntu based info here. Essentially sudo apt-get install ec2-api-tools should get the required tools.\nWhat it does: Backs up all instances and deletes all snapshots older than 7 days.\nYou can find it here, hope it helps.\nDue to major problems with ec2-api-tools I’ve done a quick rewrite for to support euca2ools. Essentially I had this script running on a micro instance and due to bugs with the ubuntu kernel and java it would tank my server so I’ve switched to the python-based euca2ools.\nYou can find this script here.\nTo get euca2ools work simply install via sudo apt-get install euca2ools and add this to ~/.eucarc\nEC2_REGION=\"${EC2_REGION:-eu-west-1}\" EC2_CERT=${HOME}/cert.pem EC2_PRIVATE_KEY=${HOME}/pk.pem EC2_ACCESS_KEY=AAAAAAAAAAAAAAAAAAA EC2_SECRET_KEY=+AAAAAAAAAAAAAAaaaaaaaaaaa EC2_USER_ID=1234567890 EUCALYPTUS_CERT=/etc/ec2/amitools/cert-ec2.pem EC2_URL=https://ec2.${EC2_REGION}.amazonaws.com S3_URL=https://s3.amazonaws.com:443 ","wordCount":"191","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Shane Dowling"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://shanedowling.com/posts/backups/2011-04-01_very-simple-ec2-snapshot-management-6bcca8bd28fb_20250730_155439/"},"publisher":{"@type":"Organization","name":"Shane Dowling","logo":{"@type":"ImageObject","url":"https://shanedowling.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://shanedowling.com/ accesskey=h title="Shane Dowling (Alt + H)">Shane Dowling</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://shanedowling.com/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://shanedowling.com/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent"></h1><div class=post-meta>Shane Dowling</div></header><div class=post-content><p>title: Very Simple EC2 Snapshot Management
slug: very-simple-ec2-snapshot-management-6bcca8bd28fb
date: 2011-04-01T00:00:00.000Z
categories: [&ldquo;Tech&rdquo;]</p><p>I&rsquo;ve been pulling my hair out trying to get a handy ec2 snapshot
backup/management working. My google results have ranged from broken
libraries to using bash scripts to do one aspect and php scripts to do
another, all of the solutions seem to have serious issues with regions.</p><p>Anyway I&rsquo;ve coded up a very very stupidly simple bash script that&rsquo;s
based on the ec2-api-tools. Ubuntu based info <a href=https://help.ubuntu.com/community/EC2StartersGuide>here</a>. Essentially sudo apt-get install ec2-api-tools should get the required tools.</p><p><strong>What it does:</strong> Backs up all instances and deletes all snapshots older
than 7 days.</p><p>You can find it <a href=http://pastebin.com/xMHQUbmH>here</a>, hope it helps.</p><p>Due to major problems with ec2-api-tools I&rsquo;ve done a quick rewrite for
to support <a href=http://open.eucalyptus.com/wiki/Euca2oolsGuide>euca2ools</a>. Essentially I had this script running on a micro instance and due to bugs with the ubuntu kernel and java it would tank my server so I&rsquo;ve switched to the python-based euca2ools.</p><p>You can find this script <a href=http://pastebin.com/CCmJyULN>here</a>.</p><p>To get euca2ools work simply install via sudo apt-get install euca2ools
and add this to ~/.eucarc</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>EC2_REGION<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>EC2_REGION<span style=color:#66d9ef>:-</span>eu-west-1<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>EC2_CERT<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>HOME<span style=color:#e6db74>}</span>/cert.pem
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>EC2_PRIVATE_KEY<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>HOME<span style=color:#e6db74>}</span>/pk.pem
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>EC2_ACCESS_KEY<span style=color:#f92672>=</span>AAAAAAAAAAAAAAAAAAA
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>EC2_SECRET_KEY<span style=color:#f92672>=</span>+AAAAAAAAAAAAAAaaaaaaaaaaa
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>EC2_USER_ID<span style=color:#f92672>=</span><span style=color:#ae81ff>1234567890</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>EUCALYPTUS_CERT<span style=color:#f92672>=</span>/etc/ec2/amitools/cert-ec2.pem
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>EC2_URL<span style=color:#f92672>=</span>https://ec2.<span style=color:#e6db74>${</span>EC2_REGION<span style=color:#e6db74>}</span>.amazonaws.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>S3_URL<span style=color:#f92672>=</span>https://s3.amazonaws.com:443
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://shanedowling.com/>Shane Dowling</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>