<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SugarCRM 7 — Add a new action to a record | Shane Dowling</title><meta name=keywords content><meta name=description content="
Odds are if you&rsquo;re customising SugarCRM, you will at some point need to
add functionality to the records page. This article shows you a
framework for creating actions on the UI, the API entrypoints to run
your code and how to link it all together using SugarCRM&rsquo;s sidecar
functionality.
1. Add the button
In custom/modules//clients/base/views/record/record.php,
you&rsquo;ll need this to add the core button array.
$viewdefs[$module_name]['base']['view']['record']['buttons'] =
 array (
 0 =>
 array (
 'type' => 'button',
 'name' => 'cancel_button',
 'label' => 'LBL_CANCEL_BUTTON_LABEL',
 'css_class' => 'btn-invisible btn-link',
 'showOn' => 'edit',
 ),
 1 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:save_button:click',
 'name' => 'save_button',
 'label' => 'LBL_SAVE_BUTTON_LABEL',
 'css_class' => 'btn btn-primary',
 'showOn' => 'edit',
 'acl_action' => 'edit',
 ),
 2 =>
 array (
 'type' => 'actiondropdown',
 'name' => 'main_dropdown',
 'primary' => true,
 'showOn' => 'view',
 'buttons' =>
 array (
 0 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:edit_button:click',
 'name' => 'edit_button',
 'label' => 'LBL_EDIT_BUTTON_LABEL',
 'acl_action' => 'edit',
 ),
 1 =>
 array (
 'type' => 'shareaction',
 'name' => 'share',
 'label' => 'LBL_RECORD_SHARE_BUTTON',
 'acl_action' => 'view',
 ),
 2 =>
 array (
 'type' => 'pdfaction',
 'name' => 'download-pdf',
 'label' => 'LBL_PDF_VIEW',
 'action' => 'download',
 'acl_action' => 'view',
 ),
 3 =>
 array (
 'type' => 'pdfaction',
 'name' => 'email-pdf',
 'label' => 'LBL_PDF_EMAIL',
 'action' => 'email',
 'acl_action' => 'view',
 ),
 4 =>
 array (
 'type' => 'divider',
 ),
 5 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:do_some_task:click',
 'name' => 'do_some_task',
 'label' => 'LBL_DO_SOME_ACTION',
 'acl_action' => 'view',
 ),
 6 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:find_duplicates_button:click',
 'name' => 'find_duplicates_button',
 'label' => 'LBL_DUP_MERGE',
 'acl_action' => 'edit',
 ),
 7 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:duplicate_button:click',
 'name' => 'duplicate_button',
 'label' => 'LBL_DUPLICATE_BUTTON_LABEL',
 'acl_module' => '',
 'acl_action' => 'create',
 ),
 8 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:audit_button:click',
 'name' => 'audit_button',
 'label' => 'LNK_VIEW_CHANGE_LOG',
 'acl_action' => 'view',
 ),
 9 =>
 array (
 'type' => 'divider',
 ),
 10 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:delete_button:click',
 'name' => 'delete_button',
 'label' => 'LBL_DELETE_BUTTON_LABEL',
 'acl_action' => 'delete',
 ),
 ),
 ),
 3 =>
 array (
 'name' => 'sidebar_toggle',
 'type' => 'sidebartoggle',
 ),
 );
Note what I&rsquo;ve stored at array key 5. This is the custom button that
will be rendered and the event button do_some_task will be called in
the javacript file we&rsquo;ll created. You can add this anywhere in the
drop-down I just generally choose here."><meta name=author content="Shane Dowling"><link rel=canonical href=https://shanedowling.com/posts/2014-08-07_sugarcrm-7---add-a-new-action-to-a-record-d020dafdc883/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://shanedowling.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://shanedowling.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://shanedowling.com/favicon-32x32.png><link rel=apple-touch-icon href=https://shanedowling.com/apple-touch-icon.png><link rel=mask-icon href=https://shanedowling.com/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://shanedowling.com/posts/2014-08-07_sugarcrm-7---add-a-new-action-to-a-record-d020dafdc883/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://shanedowling.com/posts/2014-08-07_sugarcrm-7---add-a-new-action-to-a-record-d020dafdc883/"><meta property="og:site_name" content="Shane Dowling"><meta property="og:title" content="SugarCRM 7 — Add a new action to a record"><meta property="og:description" content="
Odds are if you’re customising SugarCRM, you will at some point need to add functionality to the records page. This article shows you a framework for creating actions on the UI, the API entrypoints to run your code and how to link it all together using SugarCRM’s sidecar functionality.
1. Add the button In custom/modules//clients/base/views/record/record.php, you’ll need this to add the core button array.
$viewdefs[$module_name]['base']['view']['record']['buttons'] = array ( 0 => array ( 'type' => 'button', 'name' => 'cancel_button', 'label' => 'LBL_CANCEL_BUTTON_LABEL', 'css_class' => 'btn-invisible btn-link', 'showOn' => 'edit', ), 1 => array ( 'type' => 'rowaction', 'event' => 'button:save_button:click', 'name' => 'save_button', 'label' => 'LBL_SAVE_BUTTON_LABEL', 'css_class' => 'btn btn-primary', 'showOn' => 'edit', 'acl_action' => 'edit', ), 2 => array ( 'type' => 'actiondropdown', 'name' => 'main_dropdown', 'primary' => true, 'showOn' => 'view', 'buttons' => array ( 0 => array ( 'type' => 'rowaction', 'event' => 'button:edit_button:click', 'name' => 'edit_button', 'label' => 'LBL_EDIT_BUTTON_LABEL', 'acl_action' => 'edit', ), 1 => array ( 'type' => 'shareaction', 'name' => 'share', 'label' => 'LBL_RECORD_SHARE_BUTTON', 'acl_action' => 'view', ), 2 => array ( 'type' => 'pdfaction', 'name' => 'download-pdf', 'label' => 'LBL_PDF_VIEW', 'action' => 'download', 'acl_action' => 'view', ), 3 => array ( 'type' => 'pdfaction', 'name' => 'email-pdf', 'label' => 'LBL_PDF_EMAIL', 'action' => 'email', 'acl_action' => 'view', ), 4 => array ( 'type' => 'divider', ), 5 => array ( 'type' => 'rowaction', 'event' => 'button:do_some_task:click', 'name' => 'do_some_task', 'label' => 'LBL_DO_SOME_ACTION', 'acl_action' => 'view', ), 6 => array ( 'type' => 'rowaction', 'event' => 'button:find_duplicates_button:click', 'name' => 'find_duplicates_button', 'label' => 'LBL_DUP_MERGE', 'acl_action' => 'edit', ), 7 => array ( 'type' => 'rowaction', 'event' => 'button:duplicate_button:click', 'name' => 'duplicate_button', 'label' => 'LBL_DUPLICATE_BUTTON_LABEL', 'acl_module' => '', 'acl_action' => 'create', ), 8 => array ( 'type' => 'rowaction', 'event' => 'button:audit_button:click', 'name' => 'audit_button', 'label' => 'LNK_VIEW_CHANGE_LOG', 'acl_action' => 'view', ), 9 => array ( 'type' => 'divider', ), 10 => array ( 'type' => 'rowaction', 'event' => 'button:delete_button:click', 'name' => 'delete_button', 'label' => 'LBL_DELETE_BUTTON_LABEL', 'acl_action' => 'delete', ), ), ), 3 => array ( 'name' => 'sidebar_toggle', 'type' => 'sidebartoggle', ), ); Note what I’ve stored at array key 5. This is the custom button that will be rendered and the event button do_some_task will be called in the javacript file we’ll created. You can add this anywhere in the drop-down I just generally choose here."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-08-07T00:00:00+00:00"><meta property="article:modified_time" content="2014-08-07T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="SugarCRM 7 — Add a new action to a record"><meta name=twitter:description content="
Odds are if you&rsquo;re customising SugarCRM, you will at some point need to
add functionality to the records page. This article shows you a
framework for creating actions on the UI, the API entrypoints to run
your code and how to link it all together using SugarCRM&rsquo;s sidecar
functionality.
1. Add the button
In custom/modules//clients/base/views/record/record.php,
you&rsquo;ll need this to add the core button array.
$viewdefs[$module_name]['base']['view']['record']['buttons'] =
 array (
 0 =>
 array (
 'type' => 'button',
 'name' => 'cancel_button',
 'label' => 'LBL_CANCEL_BUTTON_LABEL',
 'css_class' => 'btn-invisible btn-link',
 'showOn' => 'edit',
 ),
 1 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:save_button:click',
 'name' => 'save_button',
 'label' => 'LBL_SAVE_BUTTON_LABEL',
 'css_class' => 'btn btn-primary',
 'showOn' => 'edit',
 'acl_action' => 'edit',
 ),
 2 =>
 array (
 'type' => 'actiondropdown',
 'name' => 'main_dropdown',
 'primary' => true,
 'showOn' => 'view',
 'buttons' =>
 array (
 0 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:edit_button:click',
 'name' => 'edit_button',
 'label' => 'LBL_EDIT_BUTTON_LABEL',
 'acl_action' => 'edit',
 ),
 1 =>
 array (
 'type' => 'shareaction',
 'name' => 'share',
 'label' => 'LBL_RECORD_SHARE_BUTTON',
 'acl_action' => 'view',
 ),
 2 =>
 array (
 'type' => 'pdfaction',
 'name' => 'download-pdf',
 'label' => 'LBL_PDF_VIEW',
 'action' => 'download',
 'acl_action' => 'view',
 ),
 3 =>
 array (
 'type' => 'pdfaction',
 'name' => 'email-pdf',
 'label' => 'LBL_PDF_EMAIL',
 'action' => 'email',
 'acl_action' => 'view',
 ),
 4 =>
 array (
 'type' => 'divider',
 ),
 5 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:do_some_task:click',
 'name' => 'do_some_task',
 'label' => 'LBL_DO_SOME_ACTION',
 'acl_action' => 'view',
 ),
 6 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:find_duplicates_button:click',
 'name' => 'find_duplicates_button',
 'label' => 'LBL_DUP_MERGE',
 'acl_action' => 'edit',
 ),
 7 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:duplicate_button:click',
 'name' => 'duplicate_button',
 'label' => 'LBL_DUPLICATE_BUTTON_LABEL',
 'acl_module' => '',
 'acl_action' => 'create',
 ),
 8 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:audit_button:click',
 'name' => 'audit_button',
 'label' => 'LNK_VIEW_CHANGE_LOG',
 'acl_action' => 'view',
 ),
 9 =>
 array (
 'type' => 'divider',
 ),
 10 =>
 array (
 'type' => 'rowaction',
 'event' => 'button:delete_button:click',
 'name' => 'delete_button',
 'label' => 'LBL_DELETE_BUTTON_LABEL',
 'acl_action' => 'delete',
 ),
 ),
 ),
 3 =>
 array (
 'name' => 'sidebar_toggle',
 'type' => 'sidebartoggle',
 ),
 );
Note what I&rsquo;ve stored at array key 5. This is the custom button that
will be rendered and the event button do_some_task will be called in
the javacript file we&rsquo;ll created. You can add this anywhere in the
drop-down I just generally choose here."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://shanedowling.com/posts/"},{"@type":"ListItem","position":2,"name":"SugarCRM 7 — Add a new action to a record","item":"https://shanedowling.com/posts/2014-08-07_sugarcrm-7---add-a-new-action-to-a-record-d020dafdc883/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SugarCRM 7 — Add a new action to a record","name":"SugarCRM 7 — Add a new action to a record","description":"\nOdds are if you\u0026rsquo;re customising SugarCRM, you will at some point need to add functionality to the records page. This article shows you a framework for creating actions on the UI, the API entrypoints to run your code and how to link it all together using SugarCRM\u0026rsquo;s sidecar functionality.\n1. Add the button In custom/modules//clients/base/views/record/record.php, you\u0026rsquo;ll need this to add the core button array.\n$viewdefs[$module_name][\u0026#39;base\u0026#39;][\u0026#39;view\u0026#39;][\u0026#39;record\u0026#39;][\u0026#39;buttons\u0026#39;] = array ( 0 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;button\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;cancel_button\u0026#39;, \u0026#39;label\u0026#39; =\u0026gt; \u0026#39;LBL_CANCEL_BUTTON_LABEL\u0026#39;, \u0026#39;css_class\u0026#39; =\u0026gt; \u0026#39;btn-invisible btn-link\u0026#39;, \u0026#39;showOn\u0026#39; =\u0026gt; \u0026#39;edit\u0026#39;, ), 1 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;rowaction\u0026#39;, \u0026#39;event\u0026#39; =\u0026gt; \u0026#39;button:save_button:click\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;save_button\u0026#39;, \u0026#39;label\u0026#39; =\u0026gt; \u0026#39;LBL_SAVE_BUTTON_LABEL\u0026#39;, \u0026#39;css_class\u0026#39; =\u0026gt; \u0026#39;btn btn-primary\u0026#39;, \u0026#39;showOn\u0026#39; =\u0026gt; \u0026#39;edit\u0026#39;, \u0026#39;acl_action\u0026#39; =\u0026gt; \u0026#39;edit\u0026#39;, ), 2 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;actiondropdown\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;main_dropdown\u0026#39;, \u0026#39;primary\u0026#39; =\u0026gt; true, \u0026#39;showOn\u0026#39; =\u0026gt; \u0026#39;view\u0026#39;, \u0026#39;buttons\u0026#39; =\u0026gt; array ( 0 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;rowaction\u0026#39;, \u0026#39;event\u0026#39; =\u0026gt; \u0026#39;button:edit_button:click\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;edit_button\u0026#39;, \u0026#39;label\u0026#39; =\u0026gt; \u0026#39;LBL_EDIT_BUTTON_LABEL\u0026#39;, \u0026#39;acl_action\u0026#39; =\u0026gt; \u0026#39;edit\u0026#39;, ), 1 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;shareaction\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;share\u0026#39;, \u0026#39;label\u0026#39; =\u0026gt; \u0026#39;LBL_RECORD_SHARE_BUTTON\u0026#39;, \u0026#39;acl_action\u0026#39; =\u0026gt; \u0026#39;view\u0026#39;, ), 2 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;pdfaction\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;download-pdf\u0026#39;, \u0026#39;label\u0026#39; =\u0026gt; \u0026#39;LBL_PDF_VIEW\u0026#39;, \u0026#39;action\u0026#39; =\u0026gt; \u0026#39;download\u0026#39;, \u0026#39;acl_action\u0026#39; =\u0026gt; \u0026#39;view\u0026#39;, ), 3 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;pdfaction\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;email-pdf\u0026#39;, \u0026#39;label\u0026#39; =\u0026gt; \u0026#39;LBL_PDF_EMAIL\u0026#39;, \u0026#39;action\u0026#39; =\u0026gt; \u0026#39;email\u0026#39;, \u0026#39;acl_action\u0026#39; =\u0026gt; \u0026#39;view\u0026#39;, ), 4 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;divider\u0026#39;, ), 5 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;rowaction\u0026#39;, \u0026#39;event\u0026#39; =\u0026gt; \u0026#39;button:do_some_task:click\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;do_some_task\u0026#39;, \u0026#39;label\u0026#39; =\u0026gt; \u0026#39;LBL_DO_SOME_ACTION\u0026#39;, \u0026#39;acl_action\u0026#39; =\u0026gt; \u0026#39;view\u0026#39;, ), 6 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;rowaction\u0026#39;, \u0026#39;event\u0026#39; =\u0026gt; \u0026#39;button:find_duplicates_button:click\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;find_duplicates_button\u0026#39;, \u0026#39;label\u0026#39; =\u0026gt; \u0026#39;LBL_DUP_MERGE\u0026#39;, \u0026#39;acl_action\u0026#39; =\u0026gt; \u0026#39;edit\u0026#39;, ), 7 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;rowaction\u0026#39;, \u0026#39;event\u0026#39; =\u0026gt; \u0026#39;button:duplicate_button:click\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;duplicate_button\u0026#39;, \u0026#39;label\u0026#39; =\u0026gt; \u0026#39;LBL_DUPLICATE_BUTTON_LABEL\u0026#39;, \u0026#39;acl_module\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, \u0026#39;acl_action\u0026#39; =\u0026gt; \u0026#39;create\u0026#39;, ), 8 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;rowaction\u0026#39;, \u0026#39;event\u0026#39; =\u0026gt; \u0026#39;button:audit_button:click\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;audit_button\u0026#39;, \u0026#39;label\u0026#39; =\u0026gt; \u0026#39;LNK_VIEW_CHANGE_LOG\u0026#39;, \u0026#39;acl_action\u0026#39; =\u0026gt; \u0026#39;view\u0026#39;, ), 9 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;divider\u0026#39;, ), 10 =\u0026gt; array ( \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;rowaction\u0026#39;, \u0026#39;event\u0026#39; =\u0026gt; \u0026#39;button:delete_button:click\u0026#39;, \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;delete_button\u0026#39;, \u0026#39;label\u0026#39; =\u0026gt; \u0026#39;LBL_DELETE_BUTTON_LABEL\u0026#39;, \u0026#39;acl_action\u0026#39; =\u0026gt; \u0026#39;delete\u0026#39;, ), ), ), 3 =\u0026gt; array ( \u0026#39;name\u0026#39; =\u0026gt; \u0026#39;sidebar_toggle\u0026#39;, \u0026#39;type\u0026#39; =\u0026gt; \u0026#39;sidebartoggle\u0026#39;, ), ); Note what I\u0026rsquo;ve stored at array key 5. This is the custom button that will be rendered and the event button do_some_task will be called in the javacript file we\u0026rsquo;ll created. You can add this anywhere in the drop-down I just generally choose here.\n","keywords":[],"articleBody":"\nOdds are if you’re customising SugarCRM, you will at some point need to add functionality to the records page. This article shows you a framework for creating actions on the UI, the API entrypoints to run your code and how to link it all together using SugarCRM’s sidecar functionality.\n1. Add the button In custom/modules//clients/base/views/record/record.php, you’ll need this to add the core button array.\n$viewdefs[$module_name]['base']['view']['record']['buttons'] = array ( 0 =\u003e array ( 'type' =\u003e 'button', 'name' =\u003e 'cancel_button', 'label' =\u003e 'LBL_CANCEL_BUTTON_LABEL', 'css_class' =\u003e 'btn-invisible btn-link', 'showOn' =\u003e 'edit', ), 1 =\u003e array ( 'type' =\u003e 'rowaction', 'event' =\u003e 'button:save_button:click', 'name' =\u003e 'save_button', 'label' =\u003e 'LBL_SAVE_BUTTON_LABEL', 'css_class' =\u003e 'btn btn-primary', 'showOn' =\u003e 'edit', 'acl_action' =\u003e 'edit', ), 2 =\u003e array ( 'type' =\u003e 'actiondropdown', 'name' =\u003e 'main_dropdown', 'primary' =\u003e true, 'showOn' =\u003e 'view', 'buttons' =\u003e array ( 0 =\u003e array ( 'type' =\u003e 'rowaction', 'event' =\u003e 'button:edit_button:click', 'name' =\u003e 'edit_button', 'label' =\u003e 'LBL_EDIT_BUTTON_LABEL', 'acl_action' =\u003e 'edit', ), 1 =\u003e array ( 'type' =\u003e 'shareaction', 'name' =\u003e 'share', 'label' =\u003e 'LBL_RECORD_SHARE_BUTTON', 'acl_action' =\u003e 'view', ), 2 =\u003e array ( 'type' =\u003e 'pdfaction', 'name' =\u003e 'download-pdf', 'label' =\u003e 'LBL_PDF_VIEW', 'action' =\u003e 'download', 'acl_action' =\u003e 'view', ), 3 =\u003e array ( 'type' =\u003e 'pdfaction', 'name' =\u003e 'email-pdf', 'label' =\u003e 'LBL_PDF_EMAIL', 'action' =\u003e 'email', 'acl_action' =\u003e 'view', ), 4 =\u003e array ( 'type' =\u003e 'divider', ), 5 =\u003e array ( 'type' =\u003e 'rowaction', 'event' =\u003e 'button:do_some_task:click', 'name' =\u003e 'do_some_task', 'label' =\u003e 'LBL_DO_SOME_ACTION', 'acl_action' =\u003e 'view', ), 6 =\u003e array ( 'type' =\u003e 'rowaction', 'event' =\u003e 'button:find_duplicates_button:click', 'name' =\u003e 'find_duplicates_button', 'label' =\u003e 'LBL_DUP_MERGE', 'acl_action' =\u003e 'edit', ), 7 =\u003e array ( 'type' =\u003e 'rowaction', 'event' =\u003e 'button:duplicate_button:click', 'name' =\u003e 'duplicate_button', 'label' =\u003e 'LBL_DUPLICATE_BUTTON_LABEL', 'acl_module' =\u003e '', 'acl_action' =\u003e 'create', ), 8 =\u003e array ( 'type' =\u003e 'rowaction', 'event' =\u003e 'button:audit_button:click', 'name' =\u003e 'audit_button', 'label' =\u003e 'LNK_VIEW_CHANGE_LOG', 'acl_action' =\u003e 'view', ), 9 =\u003e array ( 'type' =\u003e 'divider', ), 10 =\u003e array ( 'type' =\u003e 'rowaction', 'event' =\u003e 'button:delete_button:click', 'name' =\u003e 'delete_button', 'label' =\u003e 'LBL_DELETE_BUTTON_LABEL', 'acl_action' =\u003e 'delete', ), ), ), 3 =\u003e array ( 'name' =\u003e 'sidebar_toggle', 'type' =\u003e 'sidebartoggle', ), ); Note what I’ve stored at array key 5. This is the custom button that will be rendered and the event button do_some_task will be called in the javacript file we’ll created. You can add this anywhere in the drop-down I just generally choose here.\n2. Create the javascript hook to call the API In custom/modules//clients/base/views/record/record.js create a file like this.\n({ this.context.on('button:do_some_task:click', this.do_some_task, this); }, do_some_task : function() { app.api.call('GET', app.api.buildURL('/DoSomeTask/'+this.model.get('id')), null, { //response comes back from your api, maybe you want to set some value on your model or alter a response? this.model.set('some_field', response); //Or maybe you want to show an error or success app.alert.show('bad-task-response', { }); }, this) }); } }) 3. Build the API to act on the javascript file In custom/modules//clients/base/api/doSomeTask.php create a file like so\nif(!defined('sugarEntry') || !sugarEntry) die('Not A Valid Entry Point'); require_once('custom/modules//SomeCustomClass.php'); class doSomeTask extends SugarApi { public function registerApiRest() { return array( //GET 'MyGetEndpoint' =\u003e array( //request type 'reqType' =\u003e 'GET', //endpoint path 'path' =\u003e array('', 'DoSomeTask', '?'), //endpoint variables 'pathVars' =\u003e array('', '', 'data'), //method to call 'method' =\u003e 'DoSomeTask', //short help string to be displayed in the help documentation 'shortHelp' =\u003e 'This does some custom task', ), ); } /** * Method to be used for my MyEndpoint/GetExample endpoint */ public function DoSomeTask($api, $args) { $id = $args['data']; $custom_bean = new SomeCustomClass(); $custom_bean-\u003eretrieve($id); return $custom_bean-\u003edoSomething(); } } Note: Make sure your DoSomeTask functon is uppercased not camel cased. I kept getting invalid argument count errors when it was camel-cased.\n4. Language files for the button Create a new language file at custom/Extension/modules//Ext/Language/en_us.doSomeTask.php with contents like\n$mod_strings['LBL_DO_SOME_TASK'] = 'Do some task'; 5. Quick Repair/Rebuild This should hopefully merge your language files into your code and recompile your javascript into the front-end.\n","wordCount":"636","inLanguage":"en","datePublished":"2014-08-07T00:00:00Z","dateModified":"2014-08-07T00:00:00Z","author":{"@type":"Person","name":"Shane Dowling"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://shanedowling.com/posts/2014-08-07_sugarcrm-7---add-a-new-action-to-a-record-d020dafdc883/"},"publisher":{"@type":"Organization","name":"Shane Dowling","logo":{"@type":"ImageObject","url":"https://shanedowling.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://shanedowling.com/ accesskey=h title="Shane Dowling (Alt + H)">Shane Dowling</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://shanedowling.com/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://shanedowling.com/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">SugarCRM 7 — Add a new action to a record</h1><div class=post-meta><span title='2014-08-07 00:00:00 +0000 UTC'>August 7, 2014</span>&nbsp;·&nbsp;Shane Dowling</div></header><div class=post-content><p><img loading=lazy src=/1__lM3J923TEAa5__XNjB__57Jg.jpeg></p><p>Odds are if you&rsquo;re customising SugarCRM, you will at some point need to
add functionality to the records page. This article shows you a
framework for creating actions on the UI, the API entrypoints to run
your code and how to link it all together using SugarCRM&rsquo;s sidecar
functionality.</p><h3 id=1-add-the-button>1. Add the button<a hidden class=anchor aria-hidden=true href=#1-add-the-button>#</a></h3><p>In custom/modules//clients/base/views/record/record.php,
you&rsquo;ll need this to add the core button array.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$viewdefs[$module_name][<span style=color:#e6db74>&#39;base&#39;</span>][<span style=color:#e6db74>&#39;view&#39;</span>][<span style=color:#e6db74>&#39;record&#39;</span>][<span style=color:#e6db74>&#39;buttons&#39;</span>] <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;button&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;cancel_button&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;label&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;LBL_CANCEL_BUTTON_LABEL&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;css_class&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;btn-invisible btn-link&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;showOn&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;edit&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;rowaction&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;event&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;button:save_button:click&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;save_button&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;label&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;LBL_SAVE_BUTTON_LABEL&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;css_class&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;btn btn-primary&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;showOn&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;edit&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;acl_action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;edit&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;actiondropdown&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;main_dropdown&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;primary&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;showOn&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;view&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;buttons&#39;</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;rowaction&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;event&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;button:edit_button:click&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;edit_button&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;label&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;LBL_EDIT_BUTTON_LABEL&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;acl_action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;edit&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;shareaction&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;share&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;label&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;LBL_RECORD_SHARE_BUTTON&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;acl_action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;view&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;pdfaction&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;download-pdf&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;label&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;LBL_PDF_VIEW&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;download&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;acl_action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;view&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;pdfaction&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;email-pdf&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;label&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;LBL_PDF_EMAIL&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;email&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;acl_action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;view&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;divider&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;rowaction&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;event&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;button:do_some_task:click&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;do_some_task&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;label&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;LBL_DO_SOME_ACTION&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;acl_action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;view&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;rowaction&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;event&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;button:find_duplicates_button:click&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;find_duplicates_button&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;label&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;LBL_DUP_MERGE&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;acl_action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;edit&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>7</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;rowaction&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;event&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;button:duplicate_button:click&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;duplicate_button&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;label&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;LBL_DUPLICATE_BUTTON_LABEL&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;acl_module&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;acl_action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;create&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>8</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;rowaction&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;event&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;button:audit_button:click&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;audit_button&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;label&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;LNK_VIEW_CHANGE_LOG&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;acl_action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;view&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>9</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;divider&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;rowaction&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;event&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;button:delete_button:click&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;delete_button&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;label&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;LBL_DELETE_BUTTON_LABEL&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;acl_action&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;delete&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>array</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;sidebar_toggle&#39;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;type&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;sidebartoggle&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> );
</span></span></code></pre></div><p>Note what I&rsquo;ve stored at <strong>array key 5</strong>. This is the custom button that
will be rendered and the event button do_some_task will be called in
the javacript file we&rsquo;ll created. You can add this anywhere in the
drop-down I just generally choose here.</p><h3 id=2-create-the-javascript-hook-to-call-the-api>2. Create the javascript hook to call the API<a hidden class=anchor aria-hidden=true href=#2-create-the-javascript-hook-to-call-the-api>#</a></h3><p>In custom/modules//clients/base/views/record/record.js
create a file like this.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>({
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;button:do_some_task:click&#39;</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>do_some_task</span>, <span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span> },
</span></span><span style=display:flex><span> <span style=color:#a6e22e>do_some_task</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>call</span>(<span style=color:#e6db74>&#39;GET&#39;</span>, <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>buildURL</span>(<span style=color:#e6db74>&#39;/DoSomeTask/&#39;</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>model</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;id&#39;</span>)), <span style=color:#66d9ef>null</span>, {
</span></span><span style=display:flex><span> <span style=color:#75715e>//response comes back from your api, maybe you want to set some value on your model or alter a response?
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>model</span>.<span style=color:#a6e22e>set</span>(<span style=color:#e6db74>&#39;some_field&#39;</span>, <span style=color:#a6e22e>response</span>);
</span></span><span style=display:flex><span> <span style=color:#75715e>//Or maybe you want to show an error or success
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>alert</span>.<span style=color:#a6e22e>show</span>(<span style=color:#e6db74>&#39;bad-task-response&#39;</span>, {
</span></span><span style=display:flex><span> });
</span></span><span style=display:flex><span> }, <span style=color:#66d9ef>this</span>)
</span></span><span style=display:flex><span> });
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> })
</span></span></code></pre></div><h3 id=3-build-the-api-to-act-on-the-javascript-file>3. Build the API to act on the javascript file<a hidden class=anchor aria-hidden=true href=#3-build-the-api-to-act-on-the-javascript-file>#</a></h3><p>In custom/modules//clients/base/api/doSomeTask.php create a
file like so</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span><span style=color:#a6e22e>defined</span>(<span style=color:#e6db74>&#39;sugarEntry&#39;</span>) <span style=color:#f92672>||</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>sugarEntry</span>) <span style=color:#66d9ef>die</span>(<span style=color:#e6db74>&#39;Not A Valid Entry Point&#39;</span>);
</span></span><span style=display:flex><span> <span style=color:#66d9ef>require_once</span>(<span style=color:#e6db74>&#39;custom/modules//SomeCustomClass.php&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>doSomeTask</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>SugarApi</span>
</span></span><span style=display:flex><span> {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>registerApiRest</span>()
</span></span><span style=display:flex><span> {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>array</span>(
</span></span><span style=display:flex><span> <span style=color:#75715e>//GET
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> <span style=color:#e6db74>&#39;MyGetEndpoint&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>array</span>(
</span></span><span style=display:flex><span> <span style=color:#75715e>//request type
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> <span style=color:#e6db74>&#39;reqType&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;GET&#39;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//endpoint path
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> <span style=color:#e6db74>&#39;path&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#e6db74>&#39;DoSomeTask&#39;</span>, <span style=color:#e6db74>&#39;?&#39;</span>),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//endpoint variables
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> <span style=color:#e6db74>&#39;pathVars&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#e6db74>&#39;data&#39;</span>),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//method to call
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> <span style=color:#e6db74>&#39;method&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;DoSomeTask&#39;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//short help string to be displayed in the help documentation
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> <span style=color:#e6db74>&#39;shortHelp&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;This does some custom task&#39;</span>,
</span></span><span style=display:flex><span> ),
</span></span><span style=display:flex><span> );
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74> * Method to be used for my MyEndpoint/GetExample endpoint
</span></span></span><span style=display:flex><span><span style=color:#e6db74> */</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>DoSomeTask</span>($api, $args)
</span></span><span style=display:flex><span> {
</span></span><span style=display:flex><span> $id <span style=color:#f92672>=</span> $args[<span style=color:#e6db74>&#39;data&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$custom_bean <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SomeCustomClass</span>();
</span></span><span style=display:flex><span> $custom_bean<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>retrieve</span>($id);
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> $custom_bean<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>doSomething</span>();
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Note:</strong> Make sure your DoSomeTask functon is uppercased not camel
cased. I kept getting invalid argument count errors when it was
camel-cased.</p><h3 id=4-language-files-for-the-button>4. Language files for the button<a hidden class=anchor aria-hidden=true href=#4-language-files-for-the-button>#</a></h3><p>Create a new language file at
custom/Extension/modules//Ext/Language/en_us.doSomeTask.php
with contents like</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$mod_strings[<span style=color:#e6db74>&#39;LBL_DO_SOME_TASK&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Do some task&#39;</span>;
</span></span></code></pre></div><h3 id=5-quick-repairrebuild>5. Quick Repair/Rebuild<a hidden class=anchor aria-hidden=true href=#5-quick-repairrebuild>#</a></h3><p>This should hopefully merge your language files into your code and
recompile your javascript into the front-end.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://shanedowling.com/>Shane Dowling</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>