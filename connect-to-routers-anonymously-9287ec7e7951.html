<!DOCTYPE html>
<html lang="en">
<head>
        <title>Connect to routers anonymously</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="./theme/css/main.css" />
        <link rel="stylesheet" href="./theme/css/forms.css" />
        <link href="https://shanedowling.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Shane Dowling Full Atom Feed" />
        <link href="https://shanedowling.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Shane Dowling Full RSS Feed" />
        <link href="https://shanedowling.com/feeds/category.slug.atom.xml" type="application/atom+xml" rel="alternate" title="Shane Dowling Categories Atom Feed" />
        <link href="https://shanedowling.com/feeds/category.slug.rss.xml" type="application/rss+xml" rel="alternate" title="Shane Dowling Categories RSS Feed" />
</head>
<body>

    <div class="main-nav-container">

        <div class="pure-g">
            <div class="pure-u-1 pure-u-lg-2-3">
                <div class="main-nav">
                    <ul class="main-nav-list">
                        <li class="main-nav-item"><a href="./" class="pure-menu-link">Shane Dowling</a></li>

                        <li class="main-nav-item"><a href="./category/til.html" class="pure-menu-link">TIL</a></li>
                        <li class="main-nav-item active"><a href="./category/tech.html" class="pure-menu-link">Tech</a></li>
                        <li class="main-nav-item"><a href="./category/random.html" class="pure-menu-link">Random</a></li>
                        <li class="main-nav-item"><a href="./category/productivity.html" class="pure-menu-link">Productivity</a></li>
                        <li class="main-nav-item"><a href="./category/mindfulness.html" class="pure-menu-link">Mindfulness</a></li>
                        <li class="main-nav-item"><a href="./category/leadership.html" class="pure-menu-link">Leadership</a></li>
                        <li class="main-nav-item"><a href="./category/digital-minimalism.html" class="pure-menu-link">Digital Minimalism</a></li>
                        <li class="main-nav-item"><a href="./pages/contact.html" class="pure-menu-link">Contact</a></li>
                    </ul>
                </div>
             </div>

             <div class="pure-u-1 pure-u-lg-1-3"></div>
        </div>

    </div>


<div class="page-container">
    <div class="entry-content">
        <div class="post-meta pure-g">
            <div class="pure-u-3-4 meta-data">
                <a href="./category/tech.html" class="category">Tech</a><br />

                <a class="author" href="./author/shane-dowling.html">Shane Dowling</a>
                &mdash; <abbr title="2013-09-28T00:00:00+00:00">Sat 28 September 2013</abbr>
            </div>
        </div>
    </div>

    <div class="article-header-container">
        <div class="background-image-container">

            <div class="background-image-small">
                <div class="title-container">
                    <h1>Connect to routers anonymously</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="entry-content">
        <p><img alt="" src="images/1__2zYJ6QvnP__Z17B321DD7NQ.png"></p>
<p>I've created a little script that incorporates
<a href="https://launchpad.net/wicd">wicd</a>, <a href="https://github.com/alobbs/macchanger">macchanger</a>, <a href="http://unixhelp.ed.ac.uk/CGI/man-cgi?hostname">hostname</a> and <a href="http://www.openwall.com/john/">john the ripper's</a> password list to randomise your mac address and hostname when connecting to the internet.</p>
<p>I've gone with wicd over network manager as network-manager has a
tendency to store connection details, so while your machine might id
your hostname or mac address as something new, network-manager will
actually connect using the original stored details.</p>
<p>I must admit I enjoyed writing this, it reminded me of the old days when
linux network managers were all rubbish and you had to write bash
scripts to connect to vaguely complex network configurations.</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
 <span class="c1"># Anonymise your machines internet connection</span>

<span class="c1"># Settings</span>
 <span class="nv">INTERFACE</span><span class="o">=</span>wlan1
 <span class="nv">HOSTS_FILE</span><span class="o">=</span><span class="s2">&quot;/etc/hosts&quot;</span>
 <span class="nv">START_TOKEN</span><span class="o">=</span><span class="s2">&quot;## start-anon&quot;</span>
 <span class="nv">END_TOKEN</span><span class="o">=</span><span class="s2">&quot;## end-anon&quot;</span>

<span class="c1"># Must be run as root</span>
 <span class="k">if</span> <span class="o">[[</span> <span class="nv">$EUID</span> -ne <span class="m">0</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
 <span class="nb">printf</span> <span class="s2">&quot;This script must be run as root\\n&quot;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
 <span class="nb">exit</span> <span class="m">1</span>
 <span class="k">fi</span>

<span class="c1"># Network restart function</span>
 <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;Linux&quot;</span> <span class="o">==</span> <span class="se">\`</span>uname<span class="se">\`</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
 <span class="nv">restart_network</span><span class="o">=</span><span class="s2">&quot;/etc/init.d/networking restart&quot;</span>
 <span class="k">fi</span>

<span class="c1"># Function to clear old data and add new hosts entry</span>
 <span class="k">function</span> update_hosts<span class="o">()</span>
 <span class="o">{</span>
 <span class="c1"># if no hosts file found…</span>
 <span class="k">if</span> <span class="o">[</span> ! -f <span class="nv">$1</span> <span class="o">]</span>
 <span class="k">then</span>
 <span class="nb">printf</span> <span class="se">\\</span>n<span class="s2">&quot;No hosts file found\\n&quot;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
 <span class="nb">exit</span> <span class="m">1</span>
 <span class="k">fi</span>

<span class="nv">file</span><span class="o">=</span><span class="nv">$1</span>
 <span class="nv">host</span><span class="o">=</span><span class="nv">$2</span>

<span class="nv">sed_script</span><span class="o">=</span><span class="s2">&quot;{</span>
<span class="s2"> s/</span><span class="nv">$END_TOKEN</span><span class="s2">/</span><span class="nv">$END_TOKEN</span><span class="s2">/</span>
<span class="s2"> t finished_sites</span>

<span class="s2">s/</span><span class="nv">$START_TOKEN</span><span class="s2">/</span><span class="nv">$START_TOKEN</span><span class="s2">/</span>
<span class="s2"> x</span>
<span class="s2"> t started_sites</span>

<span class="s2">s/</span><span class="nv">$START_TOKEN</span><span class="s2">/</span><span class="nv">$START_TOKEN</span><span class="s2">/</span>
<span class="s2"> x</span>
<span class="s2"> t started_sites</span>

<span class="s2">p</span>
<span class="s2"> b end</span>
<span class="s2"> : started_sites</span>
<span class="s2"> d</span>
<span class="s2"> : finished_sites</span>
<span class="s2"> x</span>
<span class="s2"> d</span>
<span class="s2"> : end</span>
<span class="s2"> d</span>
<span class="s2"> }&quot;</span>

hostname <span class="nv">$host</span>

sed — <span class="k">in</span>-place -e <span class="s2">&quot;</span><span class="nv">$sed_script</span><span class="s2">&quot;</span> <span class="nv">$file</span>
 <span class="nb">echo</span> <span class="nv">$START_TOKEN</span> &gt;&gt; <span class="nv">$file</span>
 <span class="nb">printf</span> <span class="s2">&quot;\\n127.0.1.1 </span><span class="nv">$host</span><span class="s2">\\n&quot;</span> &gt;&gt; <span class="nv">$file</span>
 <span class="nb">echo</span> <span class="nv">$END_TOKEN</span> &gt;&gt; <span class="nv">$file</span>
 <span class="o">}</span>

<span class="c1"># Presenting original information</span>
 <span class="nb">printf</span> <span class="s2">&quot;Starting to anonimise your data\\n&quot;</span>

<span class="c1"># Stop Wicd</span>
 sudo service wicd stop
 sleep <span class="m">1</span>

<span class="c1">#changing mac address to random</span>
 ifconfig <span class="nv">$INTERFACE</span> down &gt; /dev/null
 <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="o">==</span> <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
 <span class="nb">printf</span> <span class="s2">&quot;%snChanging mac address…\\n&quot;</span>
 macchanger -r <span class="nv">$INTERFACE</span>
 <span class="k">else</span>
 <span class="nb">printf</span> <span class="s2">&quot;%sScript encountered an error, sorry…\\n&quot;</span>
 <span class="nb">exit</span> <span class="m">1</span>
 <span class="k">fi</span>
 sleep <span class="m">1</span>

<span class="c1"># Use john to supply new hostname to function</span>
 <span class="nv">OLDHOST</span><span class="o">=</span><span class="k">$(</span>hostname<span class="k">)</span>
 <span class="nb">printf</span> <span class="s2">&quot;%s\\nChanging hostname…\\n&quot;</span>
 <span class="nb">printf</span> <span class="s2">&quot;Current : </span><span class="nv">$OLDHOST</span><span class="s2"> \\n&quot;</span>
 <span class="nv">FILE</span><span class="o">=</span>/usr/share/john/password.lst
 <span class="nv">WORD</span><span class="o">=</span><span class="k">$(</span>sort -R <span class="nv">$FILE</span> <span class="p">|</span> head -1<span class="k">)</span>
 update_hosts <span class="nv">$HOSTS_FILE</span> <span class="nv">$WORD</span>
 <span class="nv">NEWHOST</span><span class="o">=</span><span class="k">$(</span>hostname<span class="k">)</span>
 <span class="nb">printf</span> <span class="s2">&quot;New : </span><span class="nv">$NEWHOST</span><span class="s2"> \\n&quot;</span>
 sleep <span class="m">1</span>

<span class="c1"># putting interface up</span>
 ifconfig <span class="nv">$INTERFACE</span> up &gt; /dev/null
 <span class="nb">printf</span> <span class="s2">&quot;\\n&quot;</span>
 sleep <span class="m">1</span>

<span class="c1"># Restart networking</span>
 <span class="nv">$restart_network</span>

<span class="c1"># Get wicd back up and running</span>
 service wicd start
 sleep <span class="m">1</span>

wicd-gtk &gt; /dev/null <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">&amp;</span>
</pre></div>
    </div>

    <footer>
        <div class="pure-g post-footer">
            <div class="pure-u-1 pure-u-md-1-2">
                <div class="pure-g poster-info">
                    <div class="pure-u-3-4">
                        <h3 class="author-name"><a href="./author/shane-dowling.html">Shane Dowling</a></h3>
                        <p class="author-description">
                        </p>
                    </div>
                </div>
            </div>



        </div>


    </footer>


</div>


    <!-- Matomo -->
        <script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(['trackPageView']);
          _paq.push(['enableLinkTracking']);
          (function() {
            var u="//stats.shanedowling.com/";
            _paq.push(['setTrackerUrl', u+'matomo.php']);
                  _paq.push(['setSiteId', '1']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
          })();
        </script>
        <!-- End Matomo Code -->
</body>
</html>